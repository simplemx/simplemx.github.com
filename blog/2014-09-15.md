从今年6月中开始直到现在，接手了一个新的项目，近期这个项目终于上线了，目前看来给部门带来了挺好的结果，这里记录一下我参与这个项目所做的事情和反思。

### 项目背景

这个项目客户是两类，一类是普通用户，一类是营业员，典型场景就是校园迎新时候营业员拿着PAD到校园里使用我们的系统推广业务。

由于应用场景的多样，所以这个项目需要在PC、PAD（一体机）、手机上使用，由于是Web系统，所以基本是所有浏览器都需要支持。

鉴于在PAD、手机上使用，还开发了APP版本。



### 我的角色

由于这个项目工期很短，但是工作量巨大，所以我们都尽量使用原来的架构来开发。所以后台Java Web这边需要调整的地方不多，使用部门原有的框架开发。

所以我的角色变成了一个前端，主要负责这个项目的前端开发和Android App开发。



### 过程

###### 前端选型

由于项目开始的时候定位根本不清晰，连系统应用到什么平台上的需求都不清楚。所以开始我是使用Bootstrap来作为前端的基本框架，因为当时给我的答复是系统需要在iPAD上使用，并且为营业员操作。

但是随着需求变迁，IE系的需求弹出水面了，并且随着公司UED部门的介入，前端变成了使用阿里系的Alice，当时的需求是支持PC和iPad，所以使用Alice这样的框架对于浏览器兼容是比较好，iPad上使用Css Media Query来优化体验就可以了。

这是6月中的时候定下来的事情了，后续就是将设计师的页面转化为HTML和为团队编写些基础JS。

由于是使用原有的框架开发，所以基础JS是在原有的上面做调整。


###### 需求变化

这个项目工作量巨大，看似前端稳定了，马上又来了一个新的子系统，然后又来一个，结果在原有的上面做些调整，然后就到了7月了。

然后Pad的需求终于清晰了，并不是原有的iPad，而是android Pad，由于原先的Media Query是基于iPad来做的，所以需要调整，而且这个调整还包括了布局，毕竟iPad分辨率高，所以原有布局只是简单的在pc的模式上调整，而在android Pad上由于分辨率没那么高，好多子控件都需要调整。

而这个还是发生在业务开发已经开始了很久的情况下。

更纠结的是，除了要在andorid Pad上浏览，还要做APP版本。

真是我了个去，怎么开始的时候没这些需求呢？


###### 煎熬

首先第一个煎熬就是只能一个人慢慢的将原有的页面适应好IE6+/Chrome/Android Pad/Mobile。

最煎熬的莫过于页面的设计基本都是针对PC浏览器的，根本就没为移动设备来做设计，所以就是简单的做下布局调整，时间没有啊，只能这样弄了，结果出来还说这样那样有问题，不好操作，将这么多复杂的PC浏览器的元素放到移动设备上，能好用就怪了。

这里煎熬过了，又要煎熬APP版本，使用phonegap，然后将页面套过来，想这人家的混合APP和我现在这样的混合APP，实在是差距太大了，但是工期短啊，维护不好维护，只能直接的套个APP壳了。

可是领导又想要体验好，结果APP又出了个新版本，公共部分是原生应用，业务部分是webview。

然后天天翻看android developer相关的页面将这些布局啊什么的弄出来，结果这个不行那个不行又回炉再搞。

终于算完结了，但最后上线的是简单的套壳版本。



### 结果

目前这个系统已经上线，在公司层面，结果不错。

但是在我看来，最后的结果只能说是可以，由于工期太短，很多问题只能妥协，导致到某些问题后期暴露出来之后调整十分困难。

不过我一直渴望着做个APP，终于，在这个系统里实现了。



### 总结

####### 教训

1. 需求没弄清楚，其实开始的时候应该多从甲方那边分析，这样就不会项目开始的目标和最后出来的目标不一致了。

2. 前端、公共框架部分都交由我一个来处理，一个人的精力太有限了，以致很多细节没处理好而开发已经使用了很多了，然后最后有些一发不可收拾。

3. 扩展性开始的时候因为时间的关系，结果很多都采取了妥协，先完成再说，结果，最后还是要弄回去，结果就比较悲惨。比如要求Tab需要保留状态，由于开始的时候考虑到Tab内的业务内容是无关的，并且原来框架约束，最好是不保留状态刷新页面的模式，所以没采用Div方式，结果，现在还要为这些Tab使用Iframe来保留状态，其中困难和坑实在是一言难尽了。

4. 部门技术储备太不足了，平时都是搞业务多，以致很多人很简单的页面调Css都需要找我来处理。

5. 一套页面从IE6到移动设备都要适应，实在是不应该这样做，如果可以从头再来，我会选择分子系统、分模版来处理。这样维护也方便。

6. 前端沉淀太少了，以致前端没有一个流程规范。

7. 需要为移动设备做专门设计。

8. 移动设备需要字体更大，需要考虑触摸手势和传统用鼠标的不同。

