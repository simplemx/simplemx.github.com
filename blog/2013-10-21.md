今天又开了半天的会议，继续上周的内容，讨论部门的技术选型走向。

作为临场经常语塞的我来说，很多话题没表述清楚。

部门最近在决定放弃之前的累赘，一个基于Tapestry3的所谓框架平台，但是遭到了上层领导等的阻碍。于是会议一天一天的开，就算我们给出证据，领导也还是坚决要求不要这样做，而是在原有上面来改。

之所以想放弃这个框架平台，原因为：

1. 这套平台实在是太老了，想想Tapestry3是什么年代的，写个${a.b}都要敲多两倍以上的代码做多三倍以上的无聊配置。
2. Tapestry实在是太另类了，大多数程序员根本就不接受这个东西，每样都都重新学，而且在我看来这学习根本是没多大意义。人家往前进，我们往后退。加上这古老年代的Tapestry和原来那个年代冗余的配置那么多年累积下来，新人上手实在是太陡了，整个框架平台就很反人类。就算现在开发了大半年的开发都经常有这样那样的问题hold不住。
3. 整个框架平台定位是管理后台，跟我们的产品定位根本不是一个方向，太重太庞大了。加上那么多年遗留的累积，那么多个部门的经手往上面堆，结果可想而知，很多的过度封装。
4. Tapestry什么都是自己的一套实在是太恶心了，控制个response流都要改Tapestry的代码。
5. 过度封装的后果就是源码不可见，jar包到处都是，本来就是个Servlet一样的程序，调试却比人家N层的后台还辛苦。

而领导之所以反对，基本在于：

1. 这个产品是所谓的全公司使用，从产品演进的角度或者从公司战略角度都很好
2. 当前这个产品在我们部门出现的问题是可以解决的，并不是这个框架方面存在什么大问题
3. 扔掉依然会有那么多的坑，还是会碰到的

而今天，就是和公司的架构师进行探讨。这里记录一下主要的讨论过程。

首先是介绍新框架的一些做法。

1. 轻Session，本意为不同服务器负责不同的功能模块，重启更新不需要变动其他机器，这里就会涉及到Session共享的问题，为了减轻Session共享而造成的问题，将用户Session状态弱化到Memcached里，如果问题hold不住，可以替换回使用Session
2. BigPipe化页面，单页面应用
3. 单WAR包部署
4. 中间状态页面传递，这里可能会增加不少的网络开销

主要问题集中在第一个改造，首先这个改造带来的部署代价很大，而且多方面都没评估好，这些我要负起大多数的责任，毕竟好多东西都没想好。

架构师的观点是，改造本意给系统带来的好处不见得有多大，但是代价却很大，就算权衡好评估好，后面出现的坑也不会少，除非完全可以做到不使用Session。如果不是的话这样的代价还不如不改造。

从架构师的语言中，可以明显得感觉到我的路还长着呢，做架构需要考虑权衡的东西，当前架构到底有多少数据量的缓存，到底中间状态会带来多少的网络开销，这些我都还没做好统计，实在是弱的很。

当然，架构师也坚持按照领导的想法，不要扔掉原来的。当然他们都不用在写代码，都不用考虑下面码农干活的心情。

而我，没表达好老框架平台的致命弱点：开发维护成本太高。

按照领导的想法，不换是最省成本的，但是不改带来的维护成本开发成本都是累积的，比改造在我看来是更大的。

当然咯，换个角度不改往往人力成本就会多不少，这样可以拉多点订单。

只是，作为一个有点格调的码农，不是应该选择个似样点的框架平台么。
